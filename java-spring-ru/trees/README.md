# Trees

## Ссылки

* [Деревья как структура данных](https://ru.wikipedia.org/wiki/Дерево_(структура_данных))
* [Метод findAllById() – возвращает список всех сущностей с указанными id](https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/repository/CrudRepository.html#findAllById-java.lang.Iterable-)

В этом задании мы будем работать с иерархическими данными (деревьями), которые хранятся в базе. По своей природе реляционные базы данных не приспособлены для хранения иерархических структур, у которых есть связь родитель-наследники. Для организации хранения деревьев в базе данных существует несколько подходов, у каждого из которых есть свои преимущества и недостатки. Мы будем использовать подход, который называется "Материализованный путь". Он заключается в хранении полного пути от вершины дерева до узла. Этот подход удобно использовать, когда нужно получить всех предков текущего узла.

Для примера возьмём курс на Хекслете. У каждого курса есть пререквизит – курс, который нужно пройти, прежде чем приступать к текущему. Например, прежде чем проходить курс по массивам, нужно пройти курс Java Core. А перед прохождением курса по коллекциям нужно пройти и курс по массивам и курс Java Core.

## src/main/java/exercise/model/Course.java

## Задачи

* Допишите модель `Course`. Добавьте в класс текстовое свойство `path`, в котором будет храниться путь от вершины дерева до узла.

## src/main/resources/import.sql

## Задачи

* Изучите запросы в файле *import.sql*, которые при старте приложения добавляют данные в базу. Посмотрите, что представляет собой материализованный путь. Обратите внимание, что у вершины дерева (узел, у которого нет предков) в этом поле записано значение `null`. Таких записей может быть несколько, значит, в одной таблице может храниться несколько деревьев.

## src/main/java/exercise/controller/CourseController.java

В разработке часто возникает ситуация, когда нужно получить всех родителей текущего узла. Например, вы нашли в интернете курс и хотите узнать, какие курсы нужно пройти, чтобы приступить к этому.

## Задачи

* В контроллере создайте метод, который обрабатывает GET запросы на адрес */courses/{id}/previous/* и возвращает список всех курсов, которые нужно пройти перед этим курсом, в виде JSON. Например GET запрос на адрес */courses/4/previous/* должен вернуть:

```json
[
    {
        "id": 1,
        "title": "Introduction to programming",
        "description": "Learn about programming basics",
        "path": null
    },
    {
        "id": 2,
        "title": "Arrays",
        "description": "Learn about arrays",
        "path": "1"
    }
]
```

## Подсказки

* В этой задачи вам могут пригодится стримы
