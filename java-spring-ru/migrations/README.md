# Миграции

В этом задании вам предстоит поработать с Liquibase, библиотекой для отслеживания, управления и применения изменений в базе данных. Вам нужно будет написать файл миграции. Миграция будет изменять структуру базы данных, в данном случае создавать новую таблицу. Также в этом задании вам предстоит познакомиться с новым [форматом разметки XML](https://ru.wikipedia.org/wiki/XML)

## Ссылки

* [Пример файла миграции](https://docs.liquibase.com/concepts/basic/xml-format.html)
* [Тег changeset, который представляет собой единицу изменений, которые Liquibase делает в базе данных](https://docs.liquibase.com/concepts/basic/changeset.html)
* [Тег createTable, который создаёт новую таблицу](https://docs.liquibase.com/change-types/community/create-table.html)

## src/main/resources/application.yml

## Задачи

* Изучите файл с конфигурацией приложения, обратите внимание на комментарии

## src/main/resources/db/changelog-master.xml

## Задачи

* Изучите пример файла миграции в директории *examples*

* Опираясь на пример и документацию по Liquibase, допишите файл миграции, которая будет создавать таблицу *person* с тремя полями:

  * `id` — первичный ключ, должен генерироваться автоматически
  * `first_name` — имя
  * `last_name` — фамилия

  Типы полей выберите по своему усмотрению. Для этого нужно будет вспомнить урок по SQL

  При запуске приложения миграция накатится автоматически

* Запустите приложение и убедитесь, что миграция накатилась. Для этого откройте в браузере консоль Н2 и подключитесь к базе данных "hexlet", которая находится в текущей директории *./hexlet*. Имя пользователя "sa". Благодаря конфигурации в файле *application.yml*, консоль доступна прямо в браузере по пути *http://localhost:5000/h2console*

## src/main/java/exercise/controller/PeopleController.java

В этом задании для работы с базой данных мы будем использовать JDBC. Посмотрите пример работы в уже написанном методе `createPerson()`.

## Задачи

* Создайте обработчик, который который обрабатывает GET запросы по пути *people/* и возвращает список всех персон в виде JSON

* Создайте обработчик, который обрабатывает GET запросы по пути *people/{id}*. Обработчик должен возвращать конкретную персону в виде JSON

* Запустите приложение и попробуйте отправлять ему различные запросы при помощи POSTMAN. Добавьте несколько новых персон в базу и проверьте, что список и конкретная сущность выводятся корректно

## Подсказки

* Изучите файл с примером файла changelog в директории Examples
